<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the routeInsert method from the DBCollectionFree class, for the Dart programming language.">
  <title>routeInsert method - DBCollectionFree class - wa_model_less library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">webapp</a></li>
    <li><a href="../../wa_model_less/">wa_model_less.dart</a></li>
    <li><a href="../../wa_model_less/DBCollectionFree-class.html">DBCollectionFree</a></li>
    <li class="self-crumb">routeInsert method</li>
  </ol>
  <div class="self-name">routeInsert</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="wa_model_less&#47;DBCollectionFree-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">routeInsert</span> method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="../../wa_route/WebRoute-class.html">WebRoute</a></span>
<span class="name ">routeInsert</span>(<wbr><ol class="parameter-list"> <li><span class="parameter" id="routeInsert-param-path"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span> <span class="parameter-name">path</span>, {</span></li>
<li><span class="parameter" id="routeInsert-param-methods"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>&gt;</span></span> <span class="parameter-name">methods</span> = <span class="default-value">const [RequestMethods.POST]</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-apiDoc"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="../../wa_route/ApiDoc-class.html">ApiDoc</a></span>&gt;</span>?</span> <span class="parameter-name">apiDoc</span>()?, </span></li>
<li><span class="parameter" id="routeInsert-param-auth"><span class="type-annotation"><a href="../../wa_route/WaAuthController-class.html">WaAuthController</a>?</span> <span class="parameter-name">auth</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-extraPath"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>&gt;</span></span> <span class="parameter-name">extraPath</span> = <span class="default-value">const []</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-excludePaths"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>&gt;</span></span> <span class="parameter-name">excludePaths</span> = <span class="default-value">const []</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-hosts"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>&gt;</span></span> <span class="parameter-name">hosts</span> = <span class="default-value">const [&#39;*&#39;]</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-params"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>, <span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/Object-class.html">Object</a>?</span>&gt;</span></span> <span class="parameter-name">params</span> = <span class="default-value">const {}</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-permissions"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>&gt;</span></span> <span class="parameter-name">permissions</span> = <span class="default-value">const []</span>, </span></li>
<li><span class="parameter" id="routeInsert-param-ports"><span class="type-annotation"><a href="https://api.dart.dev/stable/3.9.2/dart-core/List-class.html">List</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/int-class.html">int</a></span>&gt;</span></span> <span class="parameter-name">ports</span> = <span class="default-value">const []</span>, </span></li>
</ol>})

      

    </section>
    
<section class="desc markdown">
  <p>Creates a route for inserting new documents into the collection.</p>
<p>This method generates a REST API endpoint that handles document creation
with automatic form validation. The route processes POST requests containing
document data, validates it against the form definition, and inserts it
into the collection.</p>
<p>Parameters:</p>
<ul>
<li><code>path</code> - URL path for this route</li>
<li><code>rq</code> - Web request instance</li>
<li><code>methods</code> - HTTP methods to accept (default: POST)</li>
<li><code>apiDoc</code> - Optional API documentation generator</li>
<li><code>auth</code> - Optional authentication controller</li>
<li><code>extraPath</code> - Additional path segments to match</li>
<li><code>excludePaths</code> - Path segments to exclude from matching</li>
<li><code>hosts</code> - Host names to match (default: all hosts)</li>
<li><code>params</code> - Additional route parameters</li>
<li><code>permissions</code> - Required permissions for access</li>
<li><code>ports</code> - Specific ports to match</li>
</ul>
<p>Returns a <a href="../../wa_route/WebRoute-class.html">WebRoute</a> configured for creating documents.</p>
<p>Success response (201):</p>
<pre class="language-json"><code class="language-json">{
  "success": true,
  "message": "inserted",
  "data": {"_id": "...", "name": "..."}
}
</code></pre>
<p>Error response (502):</p>
<pre class="language-json"><code class="language-json">{
  "success": false,
  "message": "error",
  "form": {"field1": ["error message"]}
}
</code></pre>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">WebRoute routeInsert(
  String path, {
  List&lt;String&gt; methods = const [RequestMethods.POST],
  Future&lt;ApiDoc&gt;? Function()? apiDoc,
  WaAuthController&lt;dynamic&gt;? auth,
  List&lt;String&gt; extraPath = const [],
  List&lt;String&gt; excludePaths = const [],
  List&lt;String&gt; hosts = const [&#39;*&#39;],
  Map&lt;String, Object?&gt; params = const {},
  List&lt;String&gt; permissions = const [],
  List&lt;int&gt; ports = const [],
}) {
  Future&lt;String&gt; index() async {
    final rq = RequestContext.rq;
    var res = await insert(rq.getAll());

    if (!res.success) {
      return rq.renderData(
        data: {
          &#39;form&#39;: res.toJson(),
          &#39;success&#39;: false,
          &#39;message&#39;: &#39;error&#39;,
        },
        status: 502,
      );
    }

    return rq.renderData(data: {
      &#39;data&#39;: res.formValues(),
      &#39;success&#39;: true,
      &#39;message&#39;: &#39;inserted&#39;,
    });
  }

  return WebRoute(
    path: path,
    methods: methods,
    apiDoc: apiDoc,
    auth: auth,
    excludePaths: excludePaths,
    extraPath: extraPath,
    hosts: hosts,
    params: params,
    permissions: permissions,
    ports: ports,
    index: index,
  );
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">webapp</a></li>
    <li><a href="../../wa_model_less/">wa_model_less</a></li>
    <li><a href="../../wa_model_less/DBCollectionFree-class.html">DBCollectionFree</a></li>
    <li class="self-crumb">routeInsert method</li>
</ol>

    <h5>DBCollectionFree class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    webapp
      2.1.1
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

