<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the getGlobalEvents method from the WebRequest class, for the Dart programming language.">
  <title>getGlobalEvents method - WebRequest class - wa_route library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">webapp</a></li>
    <li><a href="../../wa_route/">wa_route.dart</a></li>
    <li><a href="../../wa_route/WebRequest-class.html">WebRequest</a></li>
    <li class="self-crumb">getGlobalEvents method</li>
  </ol>
  <div class="self-name">getGlobalEvents</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <button class="toggle" id="theme-button" title="Toggle between light and dark mode" aria-label="Light and dark mode toggle">
    <span id="dark-theme-button" class="material-symbols-outlined" aria-hidden="true">
      dark_mode
    </span>
    <span id="light-theme-button" class="material-symbols-outlined" aria-hidden="true">
      light_mode
    </span>
  </button>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="wa_route&#47;WebRequest-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">getGlobalEvents</span> method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="https://api.dart.dev/stable/3.9.2/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/String-class.html">String</a></span>, <span class="type-parameter"><a href="https://api.dart.dev/stable/3.9.2/dart-core/Object-class.html">Object</a>?</span>&gt;</span></span>
<span class="name ">getGlobalEvents</span>(<wbr>)

      

    </section>
    
<section class="desc markdown">
  <p>Retrieves global events and parameters for rendering.</p>
<p>Constructs a map of global events and parameters for rendering purposes.
This includes configuration values, asset URLs, session data, and more.</p>
<p>Returns a <a href="https://api.dart.dev/stable/3.9.2/dart-core/Map-class.html">Map&lt;String, Object?&gt;</a> with global parameters and events.</p>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Map&lt;String, Object?&gt; getGlobalEvents() {
  Map&lt;String, Object?&gt; params = {};
  params[&#39;isLocalDebug&#39;] = WaServer.config.isLocalDebug;
  params[&#39;assets&#39;] = {
    &#39;js&#39;: () {
      if (jsRenderId.isNotEmpty) return jsRenderId;
      jsRenderId = &quot;&lt;#DART-SERVER#&gt;JS&lt;#DART-SERVER#&gt;&quot;;
      return jsRenderId;
    },
    &#39;css&#39;: () {
      if (cssRenderId.isNotEmpty) return cssRenderId;
      cssRenderId = &quot;&lt;#DART-SERVER#&gt;CSS&lt;#DART-SERVER#&gt;&quot;;
      return cssRenderId;
    },
    &#39;dataJs&#39;: () {
      if (dataJsId.isNotEmpty) return dataJsId;
      dataJsId = &quot;&lt;#DART-SERVER#&gt;JS-DATA&lt;#DART-SERVER#&gt;&quot;;
      return dataJsId;
      &#47;&#47;assetManager.getDataJs();
    },
  };

  params[&#39;render&#39;] = () =&gt; &#39;TODO&#39;;
  params[&#39;data&#39;] = getAll();
  params[&#39;session&#39;] = getAllSession();
  params[&#39;param&#39;] = (String path) {
    return _params.getByPathString(path, def: &#39;&#39;);
  };
  params[&#39;validator&#39;] = (String path) {
    return getValidator().navigation&lt;Object&gt;(
      path: path,
      def: &#39;&#39;,
    );
  };
  var events = {
    &#39;route&#39;: route == null ? &#39;&#47;&#39; : route!.getPathRender(),
    &#39;uri&#39;: Uri.encodeComponent(_rq.requestedUri.toString()),
    &#39;uriString&#39;: _rq.requestedUri.toString(),
    &#39;path&#39;: Uri.encodeComponent(_rq.requestedUri.path),
    &#39;pathString&#39;: _rq.requestedUri.path,
    &#39;isPath&#39;: (String path) {
      return pathsEqual([_rq.requestedUri.path, path]);
    },
    &#39;endpoint&#39;: endpoint,
    &#39;url&#39;: (String path) {
      return url(path);
    },
    &#39;urlToLanguage&#39;: (String language) {
      var res = &#39;&#39;;
      if (_rq.requestedUri.pathSegments.isNotEmpty &amp;&amp;
          _rq.requestedUri.pathSegments[0] == language) {
        res = url(_rq.requestedUri.path);
      } else if (_rq.requestedUri.pathSegments.isNotEmpty &amp;&amp;
          _rq.requestedUri.pathSegments[0] == getLanguage()) {
        var paths = _rq.requestedUri.pathSegments.sublist(1);
        res = url(&#39;&#47;$language&#47;${paths.join(&#39;&#47;&#39;)}&#39;);
      } else {
        res = url(&#39;&#47;$language${_rq.requestedUri.path}&#39;);
      }

      res = Uri.decodeFull(uri.replace(path: res).toString());
      return res;
    },
    &#39;urlParam&#39;: (String path, Map&lt;String, String&gt; params) {
      return url(path, params: params);
    },
    &#39;getCookie&#39;: (String key, [String def = &#39;&#39;]) {
      return getCookie(key, def: def);
    },
    &#39;ln&#39;: getLanguage(),
    &#39;dir&#39;: &#39;language.${getLanguage()}_dir&#39;.tr.write(this),
    &#39;langs&#39;: () {
      var langs = WaServer.appLanguages.keys;
      var result = [];

      for (var lang in langs) {
        result.add({
          &#39;code&#39;: lang,
          &#39;label&#39;: &#39;language.${lang}_label&#39;.tr.write(this),
          &#39;contry&#39;: &#39;language.${lang}_contry&#39;.tr.write(this),
        });
      }

      return result;
    },
    &#39;pageTitle&#39;: route != null &amp;&amp; route!.title.isNotEmpty
        ? route!.title
        : &#39;pages.title&#39;.tr.write(this),
    &#39;setting&#39;: _setting,
    &#39;formChecker&#39;: ([String? name]) =&gt; formChecker(name: name),
    &#39;widgetPath&#39;: (String path) {
      return &quot;$path.${WaServer.config.widgetsType}&quot;;
    },
    &#39;randomString&#39;: ([int? length]) {
      return generateRandomString(length ?? 4);
    },
    &#39;toString&#39;: (dynamic value) {
      return value.toString();
    },
  };
  params[&#39;dump&#39;] = (dynamic object) =&gt; InlineDumpWidget()
      .generateHtml!({
        &#39;var&#39;: object,
        &#39;rq&#39;: this,
      })
      .toHtml();
  params[&#39;\$e&#39;] = LMap(events, def: null);
  params[&#39;\$rq&#39;] = this;
  params[&#39;\$n&#39;] = (String path, [Object? def = &#39;&#39;]) {
    var res = getParams().navigation&lt;Object&gt;(path: path, def: def ?? &#39;&#39;);
    if (res is String) {
      return res.escape(HtmlEscapeMode.unknown);
    }
    return res;
  };
  params[&#39;\$l&#39;] = LMap(localEvents, def: null);
  params[&#39;\$t&#39;] = (String text, [Object? params]) {
    var language = getLanguage();
    if (params == null) {
      return text.tr.write(this);
    } else {
      if (params is Map) {
        return text.tr.writeByLang(language, params);
      } else if (params is List) {
        return text.tr.writeByLangArr(language, params);
      }
    }
    return text.tr.writeByLang(language);
  };
  addParam(&#39;timestamp_end&#39;, DateTime.now().millisecondsSinceEpoch);
  var duration = (getParam(&#39;timestamp_end&#39;, def: 0) as int) -
      (getParam(&#39;timestamp_start&#39;, def: 0) as int);
  addParam(&#39;duration&#39;, duration);
  var lmap = LMap(params, def: null);

  params[&#39;\$&#39;] = lmap;
  return params;
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">webapp</a></li>
    <li><a href="../../wa_route/">wa_route</a></li>
    <li><a href="../../wa_route/WebRequest-class.html">WebRequest</a></li>
    <li class="self-crumb">getGlobalEvents method</li>
</ol>

    <h5>WebRequest class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    webapp
      2.1.1
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

